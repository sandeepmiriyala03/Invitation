<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∞™‡±ç‡∞∞‡∞µ‡∞∞ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å</title>
  <style>
    body {
      font-family: 'Noto Serif Telugu', serif, sans-serif;
      background-color: #fff8dc;
      color: #4e342e;
      margin: 0; padding: 1rem;
    }
    .container {
      max-width: 480px;
      margin: 0 auto;
      background: #fff9db;
      border-radius: 0.5rem;
      padding: 1.5rem;
      box-shadow: 0 4px 6px rgb(0 0 0 / 0.1);
    }
    h2 {
      text-align: center;
      margin-bottom: 1.5rem;
      font-weight: 700;
    }
    label {
      display: block;
      margin-bottom: 1rem;
      font-weight: 600;
    }
    input[type="text"],
    select,
    input[disabled] {
      width: 100%;
      padding: 0.5rem 0.75rem;
      border: 1px solid #ccc;
      border-radius: 0.25rem;
      font-size: 1rem;
      color: #4e342e;
      box-sizing: border-box;
    }
    input[disabled] {
      background-color: #e0e0e0;
      cursor: not-allowed;
    }
    button {
      width: 100%;
      background-color: #fdd835;
      color: #4e342e;
      font-weight: 700;
      padding: 0.75rem;
      border: none;
      border-radius: 0.25rem;
      cursor: pointer;
      margin-top: 1rem;
      transition: background-color 0.3s ease;
    }
    button:hover { background-color: #fbc02d; }
    .error {
      color: #b00020;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    pre.message-box {
      background-color: #fff3e0;
      border-radius: 0.25rem;
      padding: 1rem;
      font-weight: 600;
      white-space: pre-wrap;
      color: #4e342e;
      margin-top: 1.5rem;
      max-height: 300px;
      overflow-y: auto;
    }
    .buttons-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .buttons-row button {
      flex: 1;
      min-width: 130px;
      background-color: #2196f3;
      color: white;
      padding: 0.5rem;
      border-radius: 0.25rem;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: background-color 0.3s ease;
    }
    .buttons-row button:hover { background-color: #1976d2; }
    .buttons-row button.audio-stop {
      background-color: #424242;
    }
    .buttons-row button.audio-stop:hover {
      background-color: #212121;
    }
    .buttons-row button.download {
      background-color: #4caf50;
    }
    .buttons-row button.download:hover {
      background-color: #388e3c;
    }
    .buttons-row button.share {
      background-color: #009688;
    }
    .buttons-row button.share:hover {
      background-color: #00796b;
    }
    .welcome-text {
      background-color: #dcedc8;
      color: #33691e;
      text-align: center;
      font-weight: 600;
      padding: 0.75rem;
      border-radius: 0.25rem;
      margin-bottom: 1rem;
    }
    .reset-button {
      background-color: #d32f2f;
      color: white;
      margin-top: 2rem;
    }
    .reset-button:hover {
      background-color: #b71c1c;
    }
  </style>
</head>
<body>

<div class="container" role="main" aria-label="‡∞™‡±ç‡∞∞‡∞µ‡∞∞ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞´‡∞æ‡∞∞‡∞Ç">
  <div id="welcomeText" class="welcome-text" style="display:none"></div>

  <h2>‡∞™‡±ç‡∞∞‡∞µ‡∞∞ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å</h2>

  <div id="errorMessages" class="error" aria-live="assertive"></div>

  <label for="nameInput">
    ‡∞™‡±á‡∞∞‡±Å <span aria-hidden="true" style="color:#b00020;">*</span>
  </label>
  <input
    type="text"
    id="nameInput"
    placeholder="‡∞Æ‡±Ä ‡∞™‡±á‡∞∞‡±Å ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø"
    maxlength="30"
    aria-required="true"
  />

  <label for="gotraSelect">
    ‡∞ó‡±ä‡∞§‡±ç‡∞∞‡∞Ç <span aria-hidden="true" style="color:#b00020;">*</span>
  </label>
  <select id="gotraSelect" aria-required="true">
    <option value="">‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</option>
  </select>

  <label for="ganaInput">
    ‡∞ó‡∞£‡∞Æ‡±Å <span aria-hidden="true" style="color:#b00020;">*</span>
  </label>
  <input type="text" id="ganaInput" disabled aria-readonly="true" />

  <button id="generateBtn" type="button">‡∞™‡±ç‡∞∞‡∞µ‡∞∞ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞ö‡±Ç‡∞™‡∞ø‡∞Ç‡∞ö‡±Å</button>

  <pre id="finalMessage" class="message-box" style="display:none" tabindex="0" aria-live="polite"></pre>

  <div id="actionButtons" class="buttons-row" style="display:none">
    <button type="button" id="copyBtn" aria-label="‡∞ï‡∞æ‡∞™‡±Ä ‡∞ö‡±á‡∞Ø‡∞ø">üìã ‡∞ï‡∞æ‡∞™‡±Ä ‡∞ö‡±á‡∞Ø‡∞ø</button>
    <button type="button" id="downloadBtn" class="download" aria-label="TXT ‡∞°‡±å‡∞®‡±ç‡∞≤‡±ã‡∞°‡±ç">‚¨áÔ∏è TXT ‡∞°‡±å‡∞®‡±ç‡∞≤‡±ã‡∞°‡±ç</button>
    <button type="button" id="playAudioBtn" aria-label="‡∞Ü‡∞°‡∞ø‡∞Ø‡±ã ‡∞™‡±ç‡∞≤‡±á">üîä ‡∞Ü‡∞°‡∞ø‡∞Ø‡±ã</button>
    <button type="button" id="stopAudioBtn" class="audio-stop" aria-label="‡∞Ü‡∞°‡∞ø‡∞Ø‡±ã ‡∞Ü‡∞™‡±Å" style="display:none">‚èπ ‡∞Ü‡∞°‡∞ø‡∞Ø‡±ã ‡∞Ü‡∞™‡±Å</button>
    <button type="button" id="whatsappShareBtn" class="share" aria-label="WhatsApp‡∞≤‡±ã ‡∞™‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø">üì≤ WhatsApp‡∞≤‡±ã ‡∞™‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø</button>
  </div>

  <button id="resetBtn" type="button" class="reset-button" aria-label="‡∞°‡∞æ‡∞ü‡∞æ ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞Ç‡∞ö‡±Å / ‡∞∞‡±Ä‡∞∏‡±Ü‡∞ü‡±ç">‡∞°‡∞æ‡∞ü‡∞æ ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞Ç‡∞ö‡±Å / ‡∞∞‡±Ä‡∞∏‡±Ü‡∞ü‡±ç</button>
</div>

<script>
  const GOTRA_GANA_MAP = [
  {
    gotra: "‡∞ï‡∞æ‡∞∂‡±ç‡∞Ø‡∞™",
    gana: "‡∞ï‡∞æ‡∞∂‡±ç‡∞Ø‡∞™",
    details:
      "‡∞ï‡∞æ‡∞∂‡±ç‡∞Ø‡∞™, ‡∞Ö‡∞µ‡∞§‡±ç‡∞∏‡∞æ‡∞∞, ‡∞µ‡±à‡∞ß‡±É‡∞µ‡±á‡∞§‡∞ø, ¬†‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É(‡∞ó‡±ç‡∞∞‡∞Ç‡∞•‡∞∏‡±ç‡∞•‡∞Ç) ‡∞Ö‡∞®‡∞ø‡∞ï‡±ä‡∞Ç‡∞¶‡∞∞‡±Å‡∞®‡±ç‡∞®‡±Ç, ‡∞ï‡∞æ‡∞∂‡±ç‡∞Ø‡∞™, ‡∞Ö‡∞µ‡∞§‡±ç‡∞∏‡∞æ‡∞∞, ‡∞®‡±à‡∞ß‡±É‡∞µ, ‡∞∞‡±á‡∞µ‡∞∞‡±à‡∞≠, ‡∞∂‡∞≤‡±ç‡∞Ø, ‡∞∂‡∞æ‡∞Ç‡∞°‡∞ø‡∞≤‡±ç‡∞Ø‡±á‡∞§‡∞ø ‡∞∏‡∞™‡±ç‡∞§‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø",
  },
  {
    gotra: "‡∞≠‡∞æ‡∞∞‡∞¶‡±ç‡∞µ‡∞æ‡∞ú",
    gana: "‡∞Ü‡∞Ç‡∞ó‡±Ä‡∞∞‡∞∏ ",
    details: "‡∞Ö‡∞Ç‡∞ó‡±Ä‡∞∞‡∞∏, ‡∞¨‡∞æ‡∞∞‡±ç‡∞π‡∞∏‡±ç‡∞™‡∞§‡±ç‡∞Ø, ‡∞≠‡∞æ‡∞∞‡∞¶‡±ç‡∞µ‡∞æ‡∞ú‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞ï‡±å‡∞Ç‡∞°‡∞ø‡∞®‡±ç‡∞Ø ",
    gana: "‡∞µ‡∞∂‡∞ø‡∞∑‡±ç‡∞ü",
    details: "‡∞µ‡∞æ‡∞∂‡∞ø‡∞∑‡±ç‡∞†, ‡∞Æ‡±à‡∞§‡±ç‡∞∞‡∞æ‡∞µ‡∞∞‡±Å‡∞£, ‡∞ï‡±å‡∞Ç‡∞°‡∞ø‡∞®‡±ç‡∞Ø‡±á‡∞§‡∞ø ¬†‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞∂‡±ç‡∞∞‡±Ä‡∞µ‡∞§‡±ç‡∞∏ ",
    gana: "‡∞≠‡±É‡∞ó‡±Å",
    details: "‡∞≠‡∞æ‡∞∞‡±ç‡∞ó‡∞µ, ‡∞ö‡±ç‡∞Ø‡∞æ‡∞µ‡∞®, ‡∞Ö‡∞Æ‡±ç‡∞®‡∞µ‡∞æ, ‡∞ì‡∞∞‡±ç‡∞µ, ‡∞ú‡∞æ‡∞Æ‡∞¶‡∞ó‡±ç‡∞®‡±á‡∞§‡∞ø, ‡∞á‡∞§‡∞ø ‡∞™‡∞Ç‡∞ö‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞ï‡±å‡∞∂‡∞ø‡∞ï ",
    gana: "‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞æ‡∞Æ‡∞ø‡∞§‡±ç‡∞∞",
    details:
      "‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞æ‡∞Æ‡∞ø‡∞§‡±ç‡∞∞, ‡∞Ö‡∞ò‡∞Æ‡∞∞‡±ç‡∞∑‡∞£, ‡∞ï‡±å‡∞∂‡∞ø‡∞ï‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É (‡∞µ‡±à‡∞∂‡±ç‡∞µ‡∞æ‡∞Æ‡∞ø‡∞§‡±ç‡∞∞, ‡∞¶‡±à‡∞µ‡∞∞‡∞æ‡∞§, ‡∞ú‡±å‡∞°‡∞≤‡±á‡∞§‡∞ø ‡∞Ö‡∞®‡∞ø ‡∞ó‡±ç‡∞∞‡∞Ç‡∞•‡∞∏‡±ç‡∞•‡∞Ç)",
  },
  {
    gotra: "‡∞Ü‡∞§‡±ç‡∞∞‡±á‡∞Ø",
    gana: "‡∞Ö‡∞§‡∞ø",
    details: "‡∞Ü‡∞§‡±ç‡∞∞‡±á‡∞Ø, ‡∞Ö‡∞∞‡±ç‡∞ö‡∞®‡∞æ‡∞®‡∞®, ‡∞∂‡±ç‡∞µ‡∞æ‡∞µ‡∞æ‡∞®‡±ç‡∞µ‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞π‡∞∞‡±Ä‡∞§",
    gana: "‡∞Ö‡∞ó‡∞∏‡±ç‡∞§‡±ç‡∞Ø",
    details:
      "‡∞Ö‡∞ó‡∞∏‡±ç‡∞§‡±ç‡∞Ø, ‡∞ó‡∞æ‡∞∞‡±ç‡∞ó‡±á‡∞Ø, ‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡±Å‡∞§‡±ç‡∞§‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É (‡∞Ö‡∞®‡∞ø ‡∞µ‡∞æ‡∞°‡±Å‡∞ï‡∞≤‡±ã‡∞ï‡∞≤‡∞¶‡±Å). ‡∞Ö‡∞ó‡∞∏‡±ç‡∞§‡±ç‡∞Ø‡±ã‡∞§‡∞ø ‡∞è‡∞ï‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞Æ‡∞®‡∞ø ‡∞ß‡∞∞‡±ç‡∞Æ‡∞∏‡∞ø‡∞Ç‡∞ß‡±Å‡∞µ‡±Å ‡∞®‡∞Ç‡∞¶‡±Å ‡∞ï‡∞≤‡∞¶‡±Å",
  },
  {
    gotra: "‡∞™‡∞∞‡∞æ‡∞∂‡∞∞",
    gana: "‡∞µ‡∞∂‡∞ø‡∞∑‡±ç‡∞ü",
    details: "‡∞µ‡∞æ‡∞∂‡∞ø‡∞∑‡±ç‡∞ü, ‡∞∂‡∞æ‡∞ï‡±ç‡∞§‡±ç‡∞Ø, ‡∞∏‡∞æ‡∞∞‡∞æ‡∞∂‡∞∞‡±ç‡∞Ø‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞Ö‡∞∂‡±ç‡∞µ‡∞≤‡∞æ‡∞Ø‡∞®",
    gana: "‡∞Ü‡∞Ç‡∞ó‡±Ä‡∞∞‡∞∏",
    details: "‡∞Ü‡∞Ç‡∞ó‡±Ä‡∞∞‡∞∏, ‡∞Ü‡∞Ø‡∞æ‡∞∏‡±ç‡∞Ø, ‡∞ó‡±å‡∞§‡∞Æ‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞ï‡±å‡∞Ç‡∞°‡∞ø‡∞≤‡±ç‡∞Ø ",
    gana: "‡∞ï‡∞æ‡∞∂‡±ç‡∞Ø‡∞™",
    details: "‡∞ï‡∞æ‡∞∂‡±ç‡∞Ø‡∞™, ‡∞Ö‡∞∏‡∞ø‡∞§, ‡∞¶‡±à‡∞µ‡∞≤‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞µ‡∞∂‡∞ø‡∞∑‡±ç‡∞† ",
    gana: "‡∞µ‡∞∂‡∞ø‡∞∑‡±ç‡∞ü",
    details: "‡∞µ‡∞æ‡∞∂‡∞ø‡∞∑‡±ç‡∞ü, ‡∞á‡∞®‡±ç‡∞¶‡±ç‡∞∞ ‡∞™‡±ç‡∞∞‡∞Æ‡∞¶, ‡∞Ü‡∞≠‡∞∞‡∞¶‡±ç‡∞µ‡∞®‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞∂‡±å‡∞®‡∞ï ",
    gana: "‡∞≠‡±É‡∞ó‡±Å",
    details: "‡∞≠‡∞æ‡∞∞‡±ç‡∞ó‡∞µ, ‡∞∂‡±å‡∞®‡∞ï‡±Ç‡∞§‡±ç‡∞∞, ‡∞ó‡∞æ‡∞∞‡±ç‡∞§‡±ç‡∞∏‡∞Æ‡∞¶‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞æ‡∞Æ‡∞ø‡∞§‡±ç‡∞∞ ",
    gana: "‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞æ‡∞Æ‡∞ø‡∞§‡±ç‡∞∞",
    details: "‡∞µ‡±à‡∞∂‡±ç‡∞µ‡∞æ‡∞Æ‡∞ø‡∞§‡±ç‡∞∞, ‡∞Ö‡∞ò‡∞Æ‡∞∞‡±ç‡∞∑‡∞£, ‡∞ï‡±å‡∞∂‡∞ø‡∞ï‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞ã‡∞ï‡±ç‡∞∑‡∞æ",
    gana: "‡∞Ü‡∞Ç‡∞ó‡±Ä‡∞∞‡∞∏",
    details: "‡∞Ü‡∞Ç‡∞ó‡±Ä‡∞∞‡∞∏, ‡∞¨‡∞æ‡∞∞‡±ç‡∞π‡∞∏‡±ç‡∞™‡∞§‡±ç‡∞Ø, ‡∞≠‡∞æ‡∞∞‡∞¶‡±ç‡∞µ‡∞æ‡∞ú, ‡∞µ‡∞æ‡∞®‡±ç‡∞¶‡∞®‡∞Æ‡∞æ‡∞§‡∞µ‡∞¶‡∞®‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞Æ‡±Å‡∞¶‡±ç‡∞¶‡∞≤",
    gana: "‡∞Ü‡∞Ç‡∞ó‡±Ä‡∞∞‡∞∏ ",
    details: "‡∞Ü‡∞Ç‡∞ó‡±Ä‡∞∞‡∞∏ ‡∞≠‡∞æ‡∞∞‡±ç‡∞Æ‡±ç‡∞Ø‡∞∏‡±ç‡∞µ, ‡∞Æ‡±å‡∞®‡±ç‡∞ó‡∞≤‡±ç‡∞Ø‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞ß‡∞®‡∞Ç‡∞ú‡∞Ø",
    gana: "‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞æ‡∞Æ‡∞ø‡∞§‡±ç‡∞∞",
    details: "‡∞µ‡±à‡∞∂‡±ç‡∞µ‡∞æ‡∞Æ‡∞ø‡∞§‡±ç‡∞∞, ‡∞Æ‡∞æ‡∞ß‡±Å‡∞ö‡±ç‡∞õ‡∞Ç‡∞¶‡∞®, ‡∞ß‡∞æ‡∞®‡∞Ç‡∞ú‡∞Ø‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞ï‡∞£‡±ç‡∞µ",
    gana: "‡∞Ü‡∞Ç‡∞ó‡±Ä‡∞∞‡∞∏",
    details: "‡∞Ü‡∞Ç‡∞ó‡±Ä‡∞∞‡∞∏, ‡∞Ü‡∞ú‡∞æ‡∞Æ‡∞ø‡∞≥‡±ç‡∞≥‡∞ï‡∞æ‡∞£‡±ç‡∞µ‡±á‡∞§‡∞ø ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },
  {
    gotra: "‡∞∏‡∞æ‡∞Ç‡∞ñ‡±ç‡∞Ø‡∞æ‡∞Æ‡∞® ",
    gana: "‡∞µ‡∞æ‡∞∂‡∞ø‡∞∑‡±ç‡∞ü",
    details: "‡∞µ‡∞æ‡∞∂‡∞ø‡∞∑‡±ç‡∞ü, ‡∞∂‡∞ï‡±ç‡∞§‡∞ø, ‡∞∂‡∞æ‡∞Ç‡∞ï‡±ç‡∞Ø‡∞æ‡∞Ø‡∞® ‡∞á‡∞§‡∞ø ‡∞§‡±ç‡∞∞‡∞Ø‡∞æ‡∞∞‡±ç‡∞∑‡±á‡∞Ø‡∞É",
  },

];


  const nameInput = document.getElementById("nameInput");
  const gotraSelect = document.getElementById("gotraSelect");
  const ganaInput = document.getElementById("ganaInput");
  const generateBtn = document.getElementById("generateBtn");
  const finalMessageEl = document.getElementById("finalMessage");
  const errorMessagesEl = document.getElementById("errorMessages");
  const actionButtons = document.getElementById("actionButtons");
  const copyBtn = document.getElementById("copyBtn");
  const downloadBtn = document.getElementById("downloadBtn");
  const playAudioBtn = document.getElementById("playAudioBtn");
  const stopAudioBtn = document.getElementById("stopAudioBtn");
  const whatsappShareBtn = document.getElementById("whatsappShareBtn");
  const welcomeTextEl = document.getElementById("welcomeText");
  const resetBtn = document.getElementById("resetBtn");

  let audioPlaying = false;

  function populateGotraOptions() {
    const uniqueGotras = [...new Set(GOTRA_GANA_MAP.map(item => item.gotra))];
    uniqueGotras.forEach(g => {
      const option = document.createElement("option");
      option.value = g;
      option.textContent = g;
      gotraSelect.appendChild(option);
    });
  }

  function updateGana() {
    const selectedGotra = gotraSelect.value;
    const match = GOTRA_GANA_MAP.find(item => item.gotra === selectedGotra);
    ganaInput.value = match ? match.gana : "";
  }

  function clearErrors() {
    errorMessagesEl.textContent = "";
  }

  function showError(errors) {
    errorMessagesEl.textContent = errors.join("\n");
  }

  function getPravarText(name, gotra, gana, details) {
    return `
‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Æ‡±Å ${name} ‡∞ó‡∞æ‡∞∞‡∞ø‡∞ï‡∞ø ,
‡∞™‡±á‡∞∞‡±Å : ${name}
‡∞ó‡±ã‡∞§‡±ç‡∞∞‡∞É: ${gotra}
‡∞ó‡∞£‡∞É: ${gana}
‡∞ö‡∞§‡±Å‡∞∏‡±ç‡∞∏‡∞æ‡∞ó‡∞∞ ‡∞™‡∞∞‡±ç‡∞Ø‡∞Ç‡∞§‡∞Ç ‡∞ó‡±ã‡∞¨‡±ç‡∞∞‡∞æ‡∞π‡±ç‡∞Æ‡∞£‡±á‡∞≠‡±ç‡∞Ø‡∞É ‡∞∂‡±Å‡∞≠‡∞Ç ‡∞≠‡∞µ‡∞§‡±Å ‡•§${details} ‡∞™‡±ç‡∞∞‡∞µ‡∞∞‡∞æ‡∞®‡±ç‡∞µ‡∞ø‡∞§ ${gotra} ‡∞ó‡±ã‡∞§‡±ç‡∞∞‡∞É: ‡∞∂‡±Å‡∞ï‡±ç‡∞≤ ‡∞Ø‡∞ú‡±Å‡∞∞‡±ç‡∞µ‡±á‡∞¶‡∞æ‡∞Ç‡∞§‡∞∞‡±ç‡∞ó‡∞§ ‡∞ï‡∞æ‡∞£‡±ç‡∞µ ‡∞∂‡∞æ‡∞ñ‡∞æ‡∞ß‡±ç‡∞Ø‡∞æ‡∞Ø‡±Ä ‡∞ï‡∞æ‡∞§‡±ç‡∞Ø‡∞æ‡∞Ø‡∞® ‡∞∏‡±Ç‡∞§‡±ç‡∞∞‡∞É ${name} ‡∞∂‡∞∞‡±ç‡∞Æ‡∞æ‡∞Ω‡∞π‡∞Ç ‡∞≠‡±ã ‡∞Ö‡∞≠‡∞ø‡∞µ‡∞æ‡∞¶‡∞Ø‡±á ‡••
‡∞ß‡∞®‡±ç‡∞Ø‡∞µ‡∞æ‡∞¶‡∞æ‡∞≤‡±Å,
‡∞á‡∞¶‡∞ø ‡∞µ‡∞æ‡∞ú‡∞∏‡∞®‡±á‡∞Ø‡±Ä ‡∞∏‡∞Ç‡∞ß‡±ç‡∞Ø‡∞æ‡∞µ‡∞Ç‡∞¶‡∞®‡∞Ç ‡∞™‡±ç‡∞∞‡±ã‡∞ó‡±ç‡∞∞‡∞æ‡∞Æ‡±ç ‡∞¶‡±ç‡∞µ‡∞æ‡∞∞‡∞æ ‡∞∏‡±ç‡∞µ‡∞Ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞ï‡∞Ç‡∞ó‡∞æ ‡∞∞‡±Ç‡∞™‡±ä‡∞Ç‡∞¶‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø.
`.trim();
  }

  function buildMessage(name, gotra, gana, details) {
    finalMessageEl.textContent = getPravarText(name, gotra, gana, details);
    finalMessageEl.style.display = "block";
    actionButtons.style.display = "flex";
    finalMessageEl.focus();
  }

  function saveProfile(name, gotra, gana, details) {
    localStorage.setItem("veda_pravar_profile", JSON.stringify({ name, gotra, gana, finalMessageDetails: details }));
  }

  function loadProfile() {
    const saved = localStorage.getItem("veda_pravar_profile");
    if (saved) {
      try {
        const data = JSON.parse(saved);
        if(data.name) nameInput.value = data.name;
        if(data.gotra) gotraSelect.value = data.gotra;
        if(data.gana) ganaInput.value = data.gana;
        if(data.name) {
          welcomeTextEl.textContent = `${data.name} ‡∞ó‡∞æ‡∞∞‡±Å, ‡∞™‡±ç‡∞∞‡∞µ‡∞∞ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞≤‡±ã‡∞°‡±ç ‡∞Ö‡∞Ø‡±ç‡∞Ø‡∞æ‡∞Ø‡∞ø.`;
          welcomeTextEl.style.display = "block";
        }
        if(data.finalMessageDetails) buildMessage(data.name, data.gotra, data.gana, data.finalMessageDetails);
      } catch (e) {
        console.error("Profile load error", e);
      }
    }
  }

  function validateInputs(name, gotra, gana) {
    let errors = [];
    if (!name || name.trim().length < 3) errors.push("‡∞™‡±á‡∞∞‡±Å ‡∞§‡∞™‡±ç‡∞™‡∞®‡∞ø‡∞∏‡∞∞‡∞ø, ‡∞ï‡∞®‡±Ä‡∞∏‡∞Ç 3 ‡∞Ö‡∞ï‡±ç‡∞∑‡∞∞‡∞æ‡∞≤‡±Å ‡∞â‡∞Ç‡∞°‡∞æ‡∞≤‡∞ø");
    if (!gotra) errors.push("‡∞ó‡±ã‡∞§‡±ç‡∞∞‡∞Ç ‡∞§‡∞™‡±ç‡∞™‡∞®‡∞ø‡∞∏‡∞∞‡∞ø");
    if (!gana) errors.push("‡∞ó‡∞£‡∞Æ‡±Å ‡∞§‡∞™‡±ç‡∞™‡∞®‡∞ø‡∞∏‡∞∞‡∞ø");
    return errors;
  }

  function handleGenerate() {
    clearErrors();
    const name = nameInput.value.trim();
    const gotra = gotraSelect.value;
    const gana = ganaInput.value;

    const errors = validateInputs(name, gotra, gana);
    if (errors.length) {
      showError(errors);
      return;
    }

    const match = GOTRA_GANA_MAP.find(item => item.gotra === gotra && item.gana === gana);
    if (!match) {
      showError(["‡∞§‡∞™‡±ç‡∞™‡±Å ‡∞ó‡±ä‡∞§‡±ç‡∞∞‡∞Æ‡±Å ‡∞≤‡±á‡∞¶‡∞æ ‡∞ó‡∞£‡∞Æ‡±Å"]);
      return;
    }

    buildMessage(name, gotra, gana, match.details);
    saveProfile(name, gotra, gana, match.details);

    welcomeTextEl.textContent = `${name} ‡∞ó‡∞æ‡∞∞‡∞ø ‡∞™‡±ç‡∞∞‡∞µ‡∞∞ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞∏‡±É‡∞∑‡±ç‡∞ü‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡±ç‡∞°‡∞æ‡∞Ø‡∞ø.`;
    welcomeTextEl.style.display = "block";
  }

  async function handleCopy() {
    if (!finalMessageEl.textContent) return;
    try {
      await navigator.clipboard.writeText(finalMessageEl.textContent);
      alert("‡∞™‡±ç‡∞∞‡∞µ‡∞∞ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞ï‡∞æ‡∞™‡±Ä ‡∞Ö‡∞Ø‡±ç‡∞Ø‡∞æ‡∞Ø‡∞ø");
    } catch {
      alert("‡∞ï‡∞æ‡∞™‡±Ä ‡∞µ‡∞ø‡∞´‡∞≤‡∞Æ‡±à‡∞Ç‡∞¶‡∞ø, ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Æ‡∞≥‡±ç‡∞≤‡±Ä ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø");
    }
  }

  function handleDownload() {
    if (!finalMessageEl.textContent) return;
    const blob = new Blob([finalMessageEl.textContent], { type: "text/plain;charset=utf-8" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `${nameInput.value || "pravar"}_pravar.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }

  function handleWhatsAppShare() {
    if (!finalMessageEl.textContent) {
      alert("‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å‡∞ó‡∞æ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡∞®‡±ç‡∞®‡∞ø ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.");
      return;
    }
    const url = `https://wa.me/?text=${encodeURIComponent(finalMessageEl.textContent)}`;
    window.open(url, "_blank");
  }

  function handlePlayAudio() {
    if (audioPlaying || !finalMessageEl.textContent) return;
    const utterance = new SpeechSynthesisUtterance(finalMessageEl.textContent);
    utterance.lang = "te-IN";
    utterance.pitch = 0.8;
    utterance.rate = 0.9;
    utterance.onend = () => {
      audioPlaying = false;
      playAudioBtn.style.display = "inline-block";
      stopAudioBtn.style.display = "none";
    };
    utterance.onerror = () => {
      audioPlaying = false;
      playAudioBtn.style.display = "inline-block";
      stopAudioBtn.style.display = "none";
      alert("‡∞Ü‡∞°‡∞ø‡∞Ø‡±ã ‡∞™‡±ç‡∞≤‡±á‡∞¨‡±ç‡∞Ø‡∞æ‡∞ï‡±ç ‡∞≤‡±ã ‡∞≤‡±ã‡∞™‡∞Ç. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞§‡∞ø‡∞∞‡∞ø‡∞ó‡∞ø ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.");
    };
    window.speechSynthesis.speak(utterance);
    audioPlaying = true;
    playAudioBtn.style.display = "none";
    stopAudioBtn.style.display = "inline-block";
  }

  function handleStopAudio() {
    window.speechSynthesis.cancel();
    audioPlaying = false;
    playAudioBtn.style.display = "inline-block";
    stopAudioBtn.style.display = "none";
  }

  function handleReset() {
    if (confirm("‡∞Æ‡±Ä ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡∞®‡±Å ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø‡∞ó‡∞æ ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞æ?")) {
      nameInput.value = "";
      gotraSelect.value = "";
      ganaInput.value = "";
      finalMessageEl.textContent = "";
      finalMessageEl.style.display = "none";
      errorMessagesEl.textContent = "";
      welcomeTextEl.textContent = "";
      welcomeTextEl.style.display = "none";
      actionButtons.style.display = "none";
      audioPlaying = false;
      window.speechSynthesis.cancel();
      localStorage.removeItem("veda_pravar_profile");
    }
  }

  gotraSelect.addEventListener("change", updateGana);
  generateBtn.addEventListener("click", handleGenerate);
  copyBtn.addEventListener("click", handleCopy);
  downloadBtn.addEventListener("click", handleDownload);
  playAudioBtn.addEventListener("click", handlePlayAudio);
  stopAudioBtn.addEventListener("click", handleStopAudio);
  whatsappShareBtn.addEventListener("click", handleWhatsAppShare);
  resetBtn.addEventListener("click", handleReset);

  populateGotraOptions();
  window.addEventListener("load", loadProfile);
</script>

</body>
</html>
